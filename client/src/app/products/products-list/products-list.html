<section class="products-list-section">

  <h2>Products</h2>

  <div class="col-md-12 panel">
    <button ng-click="addDefaultProduct()" class="btn btn-default pull-right">addProduct</button>
    <a class="btn btn-success pull-right" ui-sref="main.products.new">Publish</a>
  </div>

  <div class="col-md-3 menu">
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">Categories</h3>
      </div>

      <!-- <div ui-tree id="tree-root" ng-show="categories.length" data-drag-enabled="false">
        <ol ui-tree-nodes="" ng-model="categories">
          <li ng-repeat="node in categories" ui-tree-node ng-include="'products/products-list/partials/category.html'" data-collapsed="node.collapsed"></li>
        </ol>
      </div> -->

      <!--
      <accordion class="products-accordion">
        <accordion-group is-open="true" ng-repeat="node in categories">
          <accordion-heading>
            <div class="heading-inner-title col-xs-12" ng-click="(node._id !== currentCateg._id) ? fetchPage(node); $event.stopPropagation(); : ''">{{node.name}}</div>
          </accordion-heading>
          <div ng-include="'products/products-list/partials/category-accordion.html'"></div>
        </accordion-group>
      </accordion>
      -->

      <!-- <categ-tree-node ng-repeat="node in categories" node="node"></categ-tree-node> -->

      <categ-tree class="category-tree" selectcbk="onSelectCateg">
        <categ-tree-node ng-repeat="node in categories" is-open="true">
          <div ng-include="'products/products-list/partials/category-tree.html'"></div>
        </categ-tree-node>
      </categ-tree>

    </div>

  </div> <!-- panel -->

  <div class="col-md-9 panel panel-default">
    <div class="panel-body">
      <pagination
        ng-model="page"
        items-per-page="pageSize"
        total-items="totalProducts"
        max-size="10"
        previous-text="Prev"
        next-text="Next"
      ></pagination>

      <div class="list-group">
        <h4 class="empty-categ" ng-show="!products.length && !isLoading">Empty category</h4>
        <loading ng-if="isLoading" balls-count="4"></loading>
        <product-item ng-repeat="product in products" product="product" class="list-group-item"></product-item>
      </div>

      <pagination
        ng-model="page"
        items-per-page="pageSize"
        total-items="totalProducts"
        max-size="10"
        previous-text="Prev"
        next-text="Next"
      ></pagination>
    </div>
  </div> <!-- panel -->

</section>
