<section class="products-list-section">

  <div class="col-md-12 publish-btn-container clearfix">
    <!-- <button ng-click="addDefaultProduct()" class="btn btn-default pull-right">addProduct</button> -->
    <a class="btn btn-lg btn-purple pull-right" ui-sref="main.products.new">Publish!</a>
  </div>

  <div class="col-md-3 menu">
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">Categories</h3>
      </div>

      <!-- <div ui-tree id="tree-root" ng-show="categories.length" data-drag-enabled="false">
        <ol ui-tree-nodes="" ng-model="categories">
          <li ng-repeat="node in categories" ui-tree-node ng-include="'products/products-list/partials/category.html'" data-collapsed="node.collapsed"></li>
        </ol>
      </div> -->

      <!--
      <accordion class="products-accordion">
        <accordion-group is-open="true" ng-repeat="node in categories">
          <accordion-heading>
            <div class="heading-inner-title col-xs-12" ng-click="(node._id !== currentCateg._id) ? fetchPage(node); $event.stopPropagation(); : ''">{{node.name}}</div>
          </accordion-heading>
          <div ng-include="'products/products-list/partials/category-accordion.html'"></div>
        </accordion-group>
      </accordion>
      -->

      <!-- <categ-tree-node ng-repeat="node in categories" node="node"></categ-tree-node> -->

      <categ-tree class="category-tree" on-select="onSelectCateg">
        <categ-tree-node ng-repeat="node in categories" is-open="true">
          <div ng-include="'products/products-list/partials/category-tree.html'"></div>
        </categ-tree-node>
      </categ-tree>

    </div>

  </div> <!-- panel -->

  <div class="col-md-9 panel panel-default">
    <div class="panel-body">

      <loading ng-show="isLoading" balls-count="4"></loading>

      <div class="clearfix">
        <pagination
          class="pull-left col-lg-6 col-md-6 col-sm-6 col-xs-12"
          ng-model="page"
          items-per-page="pageSize"
          total-items="totalProducts"
          max-size="10"
          previous-text="Prev"
          next-text="Next"
        ></pagination>

        <div class="pull-left col-lg-6 col-md-6 col-sm-6 col-xs-12 search-box">
          <search-box
            class="pull-right"
            on-search="onSearch"
            api="searchApi">
          </search-box>
        </div>
      </div>

      <div class="list-group">
        <h4 class="empty-categ list-group-item ng-hide"
          ng-class="{ 'animated pulse': !products.length && !isLoading }"
          ng-show="!products.length && !isLoading">
          Empty list.
        </h4>
        <product-item
          ng-repeat="product in products"
          product="product"
          class="list-group-item"
          ng-class="{ 'animated fadeIn': !isLoading }"
          >
          <!-- fadeIn pulse bounce bounceIn -->
        </product-item>
      </div>

      <pagination
        ng-model="page"
        items-per-page="pageSize"
        total-items="totalProducts"
        max-size="10"
        previous-text="Prev"
        next-text="Next"
      ></pagination>
    </div>
  </div> <!-- panel -->

</section>
